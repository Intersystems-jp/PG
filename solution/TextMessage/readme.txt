Zenフォームを日本語化する方法


スタジオの新規作成ボタンを押して、カテゴリZenを選ぶとZenフォームを選ぶことができます。

Zenフォームでは、ウィザードに答えることで簡単なクラスインスタンスの作成、参照、更新を行うフォーム
を作成することができます。

データソースとして、%ZEN.DataModel.Adaptorを継承したクラスを定義する必要があります。

しかし、このウィザードは残念ながら日本語フォームの生成には対応しておらず、自分でテキストを編集する必要があります。
毎回ウィザードで生成したものを毎回編集するのも面倒なので、日本語化の一部を自動化するツールを作りました。


1.　TextMessage.zipを解凍

2.　TextMessage.xmlを作業用ネームスペースにインポート

3.　スタジオでの作業（作業用ネームスペース）

3.1　Zenフォームクラスの作成

新規>カテゴリZen>Zenフォーム

パッケージ名	フォームクラスのパッケージ名を入力
新規クラス名	フォームクラスのクラス名を入力

アプリケーション　なし

次へボタンを押す

フォームデータのパッケージとクラス

コンボボックスから生成したいクラスを選択

3.2　DOMAIN名の変更

生成されたクラスをスタジオから開く

Parameter DOMAIN = "ZENDEMO"

となっている所を適当な名前に変更（変えなくても良い）


4.　メッセージの日本語変換

作業用ネームスペースへターミナルでログイン
以下のコマンドを実行

先ほど設定したドメイン名をZENPMとしたら、以下のように実行


>write ##class(Util.MessageSetup).GenerateJapaneseMessages("ZENPM")　


問題なければ1が返ってくる。

5.　追加の日本語の編集

作業用ネームスペースのUtil.MessageForm.clsを起動
（以下は作業用ネームスペースがuser）

http://localhost:57772/csp/user/Util.MessageForm.cls

新しく追加されたレコードは、JapaneseTextが入力されていないので、そこに翻訳メッセージ
を入力する。

編集作業が終了したら、再度4.の作業を実行。
追加されたメッセージも日本語化されるはず
